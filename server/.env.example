# Aura Flow 后端环境变量配置
# 复制此文件为 .env 并填入实际值

# 环境配置
NODE_ENV=production
PORT=3001

# 数据库配置
DATABASE_URL=postgresql://username:password@localhost:5432/aura_flow
# 开发环境可使用: file:./dev.db (SQLite)

# JWT 配置
JWT_SECRET=__GENERATE_STRONG_SECRET_32_CHARS__
JWT_EXPIRES_IN=15m
REFRESH_TOKEN_SECRET=__GENERATE_STRONG_REFRESH_SECRET_32_CHARS__
REFRESH_TOKEN_EXPIRES_IN=7d

# CORS 配置
CORS_ORIGIN=https://yourdomain.com
# 开发环境可使用: http://localhost:5173

# 监控配置
SENTRY_DSN=
LOG_LEVEL=info

# AI 提供商配置
AI_PROVIDER=openai
OPENAI_API_KEY=sk-__YOUR_OPENAI_API_KEY__
OPENAI_BASE_URL=https://api.openai.com/v1

# 速率限制配置
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=120
RATE_LIMIT_LOGIN_MAX=5
RATE_LIMIT_LOGIN_WINDOW_MS=900000

# 安全配置
BCRYPT_ROUNDS=12
SESSION_SECRET=__GENERATE_STRONG_SESSION_SECRET__

# 文件上传配置
MAX_FILE_SIZE=10485760
UPLOAD_DIR=./uploads

# 监控配置
ENABLE_METRICS=true
HEALTH_CHECK_INTERVAL=30000

# 备份配置
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *

# 生产环境安全配置
TRUST_PROXY=true
SECURE_COOKIES=true
SAME_SITE_COOKIES=strict

# AI 成本控制与限流配置
AI_TIMEOUT_MS=30000
AI_MAX_RETRIES=2
AI_RPS_LIMIT=3
AI_CONCURRENCY=4
AI_DAILY_BUDGET_USD=3
AI_MONTHLY_BUDGET_USD=30
AI_CIRCUIT_FAILS=5
AI_CIRCUIT_COOLDOWN_S=120
